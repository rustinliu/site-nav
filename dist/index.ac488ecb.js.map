{"mappings":"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","sources":["src/main.js"],"sourcesContent":["footerPosition();\nfunction footerPosition() {\n    $(\".globefooter\").removeClass(\"fixed-bottom\");\n\n    let contentHeight = document.body.scrollHeight, //网页正文全文高度\n        winHeight = window.innerHeight; //可视窗口高度，不包括浏览器顶部工具栏\n\n    if (contentHeight <= winHeight) {\n        //当网页正文高度小于可视窗口高度时，为footer添加类fixed-bottom\n        $(\".globefooter\").addClass(\"fixed-bottom\");\n    }\n}\n$(window).resize(footerPosition);\n\nconst data = localStorage.getItem(\"data\");\nconst xObject = JSON.parse(data);\nconst hashMap = xObject || [\n    { logo: \"W\", url: \"https://wangdoc.com/\" },\n    { logo: \"J\", url: \"https://www.jquery123.com/\" },\n    { logo: \"N\", url: \"http://nodejs.cn/\" },\n];\nconst simplifyUrl = (url) => {\n    return url\n        .replace(\"https://\", \"\")\n        .replace(\"http://\", \"\")\n        .replace(\"www.\", \"\")\n        .replace(/\\/.*/, \"\"); // 删除 / 开头的内容\n};\n\nconst render = () => {\n    $(\".webclt\").find(\"li:not(#addwebclt)\").remove();\n    hashMap.forEach((node, index) => {\n        const $li = $(`\n                <li>\n                    <a href=\"${node.url}\">\n                        <svg class=\"icon\">\n                            <use xlink:href=\"#icon-16gl-${node.logo}\"></use>\n                        </svg>\n                        <span>${simplifyUrl(node.url)}</span>\n                    </a>\n                    <div class=\"close\">\n                <svg class=\"iconclose\">\n                <use xlink:href=\"#icon-16gl-cross\"></use>\n                </svg>\n                </div>\n                <div class=\"mod\">\n                <svg class=\"iconmod\">\n                <use xlink:href=\"#icon-16gl-gear\"></use>\n                </svg>\n                </div>\n                </li>\n      `).insertBefore($(\"#addwebclt\"));\n        footerPosition();\n        $li.on(\"click\", \".close\", (e) => {\n            e.stopPropagation(); // 阻止冒泡\n            hashMap.splice(index, 1);\n            render();\n            //删除之后还能返回原位置\n            e.pageY !== e.clientY &&\n                window.scrollTo(e.pageX + e.clientX, e.pageY + e.clientY);\n            const string = JSON.stringify(hashMap);\n            localStorage.setItem(\"data\", string);\n        });\n        $li.on(\"click\", \".mod\", (e) => {\n            e.stopPropagation(); // 阻止冒泡\n            $(\".cover\").height(\n                window.innerHeight - document.body.scrollHeight >= 0\n                    ? window.innerHeight\n                    : document.body.scrollHeight\n            );\n            stop();\n            $(\".mdialog\").html(`<span>请输入网址：</span>\n            <input type=\"url\" id=\"modweburl\" />\n            <span class=\"btn\">\n                <button id=\"confirmmod\">修改</button>\n                <button id=\"cancel\">取消</button>\n            </span>`);\n            $(\"#modweburl\").val(hashMap[index].url);\n            $(\"#addmodal\").removeClass(\"modaldisabled\");\n            $(\"#modweburl\").focus();\n            $(\"#cancel\").on(\"click\", cancelevt);\n            $(\"#confirmmod\").on(\"click\", { value: index }, confirmmodevt);\n        });\n    });\n};\nrender();\n\n$(\"#addwebclt\").on(\"click\", function (evt) {\n    evt.preventDefault();\n    //用计算得出cover的高度，避免显示BUG\n    $(\".cover\").height(\n        window.innerHeight - document.body.scrollHeight >= 0\n            ? window.innerHeight\n            : document.body.scrollHeight\n    );\n    stop();\n    $(\".mdialog\").html(`<span>请输入网址：</span>\n    <input type=\"url\" id=\"addweburl\" />\n    <span class=\"btn\">\n        <button id=\"confirm\">确定</button>\n        <button id=\"cancel\">取消</button>\n    </span>`);\n    $(\"#addmodal\").removeClass(\"modaldisabled\");\n    $(\"#cancel\").on(\"click\", cancelevt);\n    $(\"#confirm\").on(\"click\", confirmevt);\n    $(\"#addweburl\").focus();\n});\n\nfunction confirmmodevt(evt) {\n    let url = $(\"#modweburl\").val();\n    index = evt.data.value;\n    if (url.indexOf(\"http\") !== 0) {\n        url = \"https://\" + url;\n    }\n    hashMap[index].url = url;\n    hashMap[index].logo = simplifyUrl(url)[0].toUpperCase();\n    render();\n    const string = JSON.stringify(hashMap);\n    localStorage.setItem(\"data\", string);\n    $(\"#cancel\").click();\n}\n\n// $(\"#cancel\").on(\"click\", cancelevt);\n// $(\"#confirm\").on(\"click\", confirmevt);\nfunction cancelevt() {\n    move();\n    $(\".mdialog\").html(\"\");\n    $(\"#addmodal\").addClass(\"modaldisabled\");\n    //移除事件监听\n    $(\"#cancel\") && $(\"#cancel\").off(\"click\", cancelevt);\n    $(\"#confirm\") && $(\"#confirm\").off(\"click\", confirmevt);\n    $(\"#confirmmod\") && $(\"#confirmmod\").off(\"click\", confirmmodevt);\n    window.scroll(0, document.body.scrollHeight);\n}\nfunction confirmevt() {\n    let url = $(\"#addweburl\").val();\n    if (url.indexOf(\"http\") !== 0) {\n        url = \"https://\" + url;\n    }\n    hashMap.push({\n        logo: simplifyUrl(url)[0].toUpperCase(),\n        url: url,\n    });\n    render();\n    const string = JSON.stringify(hashMap);\n    localStorage.setItem(\"data\", string);\n    $(\"#cancel\").click();\n}\n\nfunction stop() {\n    let mo = function (e) {\n        passive: false;\n    };\n    document.body.style.overflow = \"hidden\";\n    document.addEventListener(\"touchmove\", mo, false); //禁止页面滑动\n}\n//取消滚动限制\nfunction move() {\n    let mo = function (e) {\n        passive: false;\n    };\n    document.body.style.overflow = \"\"; //出现滚动条\n    document.removeEventListener(\"touchmove\", mo, false);\n}\n\n$(document).on(\"keyup\", (evt) => {\n    const { key, keyCode } = evt;\n    //实现模态框回车即确认功能\n    if (key === \"Enter\" && !$(\"#addmodal\").hasClass(\"modaldisabled\")) {\n        $(\"#confirm\").click();\n        $(\"#confirmmod\").click();\n    } else if (keyCode === 27 && !$(\"#addmodal\").hasClass(\"modaldisabled\")) {\n        $(\"#cancel\").click(); //实现模态框Esc即退出功能\n    }\n});\n\ndayjs.locale(\"zh-cn\");\nconst sctime = () => {\n    setTimeout(() => {\n        $(\"#rlTime\").text(dayjs().format(\"YYYY年MM月DD日HH时mm分ss秒 dddd\"));\n        sctime();\n    }, 500);\n};\nsctime();\n"],"names":["footerPosition","$","removeClass","document","body","scrollHeight","window","innerHeight","addClass","resize","data","localStorage","getItem","xObject","JSON","parse","hashMap","logo","url","simplifyUrl","replace","render","find","remove","forEach","node","index","$li","e","stopPropagation","splice","pageY","clientY","scrollTo","pageX","clientX","string","stringify","setItem","on","height","stop","html","val","focus","cancelevt","value","confirmmodevt","evt","indexOf","toUpperCase","click","move","off","confirmevt","scroll","push","preventDefault"],"version":3,"file":"index.ac488ecb.js.map"}